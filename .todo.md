# Bale - POC Accounting & Inventory App

## Current Status
- ✅ Inventory Module (Goods Receipt, Dispatch, Stock Tracking)
- ⏳ Accounting Module (in progress)

---

## POC Goal
**Working accounting-inventory system for 1 accountant to evaluate in 10 days**

Success Criteria:
- Import opening balances via CSV (100 ledgers in 5 minutes)
- Create 10 invoices from goods dispatch
- Record payments (cash/credit/partial)
- View trial balance + P&L + balance sheet (verify Dr = Cr)

---

## Phase 1: Core Accounting (Days 1-10) ⏳

### Day 1-2: Invoice Finalization + Edit + Credit Notes ✅ COMPLETE
- ✅ Run `npm run build` (passed with 0 errors)
- ✅ Update test data (product prices, company state, partner states)
- ✅ Database verified (14 system ledgers, 5 dispatches ready)
- ✅ Edit invoice page with 24h window check
- ✅ Credit note page with journal entry reversal
- ✅ Credit note journal entries (Dr Sales/GST, Cr Customer)
- ⭕ Test invoice auto-creation from goods dispatch (READY TO TEST)
- ⭕ Verify journal entries in database (Dr = Cr)
- ⭕ Test edit + credit note flow end-to-end

### Day 3-4: Trial Balance CSV Import ⭕
**Files:** `app/dashboard/onboarding/import-trial-balance/page.tsx`, `lib/accounting/trial-balance-csv.ts`, `app/actions/accounting/trial-balance-import.ts`

- ⭕ CSV template (3-row: Entry Type, Headers, Data)
- ⭕ Preview table with error highlighting
- ⭕ Validate Dr = Cr before import
- ⭕ Import creates ledgers + opening journal entry

### Day 5: Invoice List & Detail Pages ✅ COMPLETE
**Files:** `app/dashboard/invoices/page.tsx`, `app/dashboard/invoices/[id]/page.tsx`

- ✅ Invoice list (date, customer, amount, status)
- ✅ Invoice detail with journal entry view (shows Dr/Cr breakdown)
- ✅ View linked goods dispatch
- ✅ Navigation link added to sidebar

### Day 6-7: Payment Recording ✅ COMPLETE
**Files:** `app/dashboard/invoices/[id]/record-payment/page.tsx`, `app/actions/accounting/payments.ts`, `components/accounting/PaymentForm.tsx`

- ✅ Manual entry form (amount, method, reference)
- ✅ Payment methods: Cash, Bank, Cheque, UPI
- ✅ Partial payment support
- ✅ Section 269ST check (block cash >₹2L)
- ✅ Auto journal entry (Dr Cash/Bank, Cr Customer)
- ✅ Balance due calculation and display

### Day 8-10: Basic Reports ⭕
**Files:** `app/dashboard/reports/page.tsx`, `lib/accounting/reports.ts`

- ⭕ Trial Balance (all ledgers, Dr/Cr totals)
- ⭕ Profit & Loss (Revenue - Expenses)
- ⭕ Balance Sheet (Assets = Liabilities + Equity)
- ⭕ Outstanding Receivables (unpaid invoices)

---

## Phase 2: Polish & Scale (Days 11-20) ⭕

### Customer/Product Import ⭕
- ⭕ CSV import for customers
- ⭕ CSV import for products

### GST Compliance ⭕
- ⭕ GSTR-1 report (local calculation, no API)
- ⭕ E-invoice generation (sandbox API)

### Purchase Bills ⭕
- ⭕ Mirror of sales invoices for purchases
- ⭕ Link to goods receipt

---

## Deferred (Post-POC)
- Tally XML import/export
- Multi-currency
- Bank reconciliation
- Advanced permissions
- E-way bill generation
- GSTR-3B

---

## Current Sprint
**Completed:** Day 1-2 (Invoice + Edit + Credit Note) + Day 5 + Day 6-7 ✅
**Status:** All core invoice functionality built, ready for testing
**Next:**
1. Test end-to-end: Create invoice from dispatch → Edit → Create credit note
2. Verify journal entries in database (Dr = Cr for all transactions)
3. Build Day 8-10: Reports (Trial Balance, P&L, Balance Sheet)
4. Build Day 3-4: Trial Balance CSV Import
